<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">










<html>
  <head>
    <title>Jawr - Tutorial: How to use smartsprites with Jawr to generate image sprites</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <!-- TODO: move this into JavaScript to patch the skin
      <div class="xright">  </div>
    -->
    <div id="leftColumn">
      <div id="navcolumn">
             <dl class=navgroup>
        <dt>About</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../servlets/ProjectHome">Home</a>
        </li>
              
    <li class="none">
              <a href="../introduction.html">Introduction</a>
        </li>
              
    <li class="none">
              <a href="../features.html">Features</a>
        </li>
              
    <li class="none">
              <a href="../changes.html">Change history</a>
        </li>
              
    <li class="none">
              <a href="../team.html">The team</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>Documentation</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../docs/servlet.html">The Jawr servlet</a>
        </li>
              
    <li class="none">
              <a href="../docs/descriptor_syntax.html">Descriptor syntax</a>
        </li>
              
    <li class="none">
              <a href="../docs/custom_bundles.html">Bundle definition</a>
        </li>
              
    <li class="none">
              <a href="../docs/source_ordering.html">Source order in bundles</a>
        </li>
              
    <li class="none">
              <a href="../docs/global_preprocessors.html">Global preprocessors</a>
        </li>
              
    <li class="none">
              <a href="../docs/postprocessors.html">Postprocessors</a>
        </li>
              
    <li class="none">
              <a href="../docs/generators.html">Generators</a>
        </li>
              
    <li class="none">
              <a href="../docs/advanced_generators.html">Advanced generators</a>
        </li>
              
    <li class="none">
              <a href="../docs/license_files.html">Licenses in resources</a>
        </li>
              
    <li class="none">
              <a href="../docs/taglibs.html">JSP Tag library</a>
        </li>
              
    <li class="none">
              <a href="../docs/plain_html.html">Use in HTML pages</a>
        </li>
              
    <li class="none">
              <a href="../docs/modes.html">Debug and production modes</a>
        </li>
              
    <li class="none">
              <a href="../docs/messages_gen.html">i18n message generator</a>
        </li>
              
    <li class="none">
              <a href="../docs/jmx_support.html">JMX Support</a>
        </li>
              
    <li class="none">
              <a href="../docs/bundle_preprocessing.html">Bundle preprocessing</a>
        </li>
              
    <li class="none">
              <a href="../docs/jawr_maven_plugin.html">Jawr Maven plugin</a>
        </li>
              
    <li class="none">
              <a href="../docs/jawr_ant_task.html">Jawr Ant task</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>Integration</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../integration/augmenter.html">Add Jawr to your framework</a>
        </li>
              
    <li class="none">
              <a href="../integration/spring.html">Spring MVC</a>
        </li>
              
    <li class="none">
              <a href="../integration/facelets.html">Facelets Tag library</a>
        </li>
              
    <li class="none">
              <a href="../integration/wicket.html">Wicket</a>
        </li>
              
    <li class="none">
              <a href="../integration/grails.html">Grails plugin</a>
        </li>
              
    <li class="none">
              <a href="../integration/dwr.html">DWR</a>
        </li>
              
    <li class="none">
              <a href="../integration/validator.html">Commons Validator - Struts</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>Tutorials</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../tutorials/quickstart.html">Quick start</a>
        </li>
              
    <li class="none">
              <a href="../tutorials/howToUseJawrToServeImage.html">How to use Jawr to serve image resources</a>
        </li>
              
    <li class="none">
              <strong>How to generate Image sprites with Jawr</strong>
        </li>
              
    <li class="none">
              <a href="../tutorials/faq_howto.html">FAQ-Howto</a>
        </li>
              
    <li class="none">
              <a href="../tutorials/libraries.html">Using popular libraries</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>API and sources</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../nonav/apidocs/index.html">JavaDocs</a>
        </li>
              
    <li class="none">
              <a href="../nonav/xref/index.html">Source XREF</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>Project tools</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../servlets/ProjectHome">Project home</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectMemberList">Membership</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectNewsList">Announcements</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectForumView">Discussion forums</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectMailingListList">Mailing lists</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectDocumentList">Documents & files</a>
        </li>
              
    <li class="none">
              <a href="../source/browse/jawr/">Subversion</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectIssues">Issue tracker</a>
        </li>
          </ul></dd>
    </dl>
        </div>
      <script>
        // replace the java.net project tools with the navigation bar from Maven.
        // also get rid of "Get Involved" thingie too, while we are at it
        var pt = document.getElementById("projecttools");
        var nv = document.getElementById("navcolumn");
        
        while(pt.previousSibling!=null)
          pt.parentNode.removeChild(pt.previousSibling);
        
        pt.parentNode.insertBefore(nv,pt);
        pt.parentNode.removeChild(pt);
      </script>
      <script>
        // kill "description" h3 bar
        var ld = document.getElementById("longdescription");
        if(ld!=null) {
          for( n=ld.firstChild; n!=null; n=n.nextSibling ) {
            if(n.nodeType==1 && n.innerHTML=="Description" ) {
              n.parentNode.removeChild(n);
              break;
            }
          }
        }
      </script>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Introduction</h2>
<p>The goal of this tutorial is to explain how to set up Jawr to generate sprites for CSS images using smartsprites. <br />
This feature is available since the version 3.2 of Jawr. <br />
Smartsprites allows the user to create sprites for CSS images from annotations in the CSS files.</p>
<p>The reference documentation for <b>smartsprites</b>, containing the different annotations can be found on the <a href="http://csssprites.org/" class="externalLink">smartsprites</a> project site.&#160;</p>
<p>It is important to note that the sprite generation feature works only in production mode. <br />
Jawr will not generate the reference the image sprites in the CSS files if you are in debug mode.</p>
<div class="section"><h3>Requirements</h3>
<p>Smartsprites requires at least the use of <b>JRE 5</b>. If you want to use the sprite generation feature in Jawr, you must have a project which use at least JRE 5.0.</p>
<p>Jawr requires at least the version <b>0.2.5</b> of smartsprites for this feature.</p>
</div>
<div class="section"><h3>How it works ?</h3>
<p>Smartsprites is a tool, which helps the developper to generate sprites from special annotations in the CSS files. When the user enable the sprite generation feature, Jawr will first let smartsprites process all the CSS files available in the CSS bundles to generate the CSS sprites, and then it will process the CSS files to generate the bundles.</p>
</div>
<div class="section"><h3>Set up Jawr in your project</h3>
<p>Please check the <a href="./quickstart.html">quickstart</a> tutorial for the instruction about Jawr installation in your project. <br />
Then add the dependency to smartsprites in your project.</p>
<ul><li>For non maven project<p>If you don't use maven, you can find <b>smartsprites</b> jar and the libraries associated in the package file available in the <a href="http://download.csssprites.org/" class="externalLink">download section</a> of smartsprites site.<br />
From there, download the version 0.2.5 or greater. In the zip file, you will find in the <i>lib</i> folder the <b>smartsprites</b> jar and the jars used by smartsprites. </p>
</li>
<li>For maven project<p>If you're using maven, you must add the smartsprites repository in your maven user or project settings.</p>
<div class="source"><pre>    &lt;!-- Smartsprites maven repository --&gt;
    &lt;repository&gt;
      &lt;id&gt;maven2-repository.smartsprites&lt;/id&gt;
      &lt;name&gt;Smartsprites Maven Repository&lt;/name&gt;
      &lt;url&gt;http://download.csssprites.org/maven2/&lt;/url&gt;
    &lt;/repository&gt; </pre>
</div>
<p>And you must also add in your dependencies, the following section : </p>
<div class="source"><pre>
        &lt;dependency&gt;
                &lt;groupId&gt;org.carrot2&lt;/groupId&gt;
                &lt;artifactId&gt;smartsprites&lt;/artifactId&gt;
                &lt;version&gt;0.2.5&lt;/version&gt;
        &lt;/dependency&gt; </pre>
</div>
</li>
</ul>
</div>
<div class="section"><h3>Configure instances of the Jawr Servlet</h3>
<p>You must configure Jawr to use the CSS and the image servlets. <br />
Please check the <a href="./howToUseJawrToServeImage.html">tutorial</a> on how set up jawr to serve image. </p>
</div>
<div class="section"><h3>Jawr configuration file</h3>
<p>Jawr uses a global preprocessor to generate the CSS sprites. To enable the sprite generation feature, you need to add the following property in your configuration file:</p>
<div class="source"><pre>
        jawr.css.bundle.factory.global.preprocessors=smartsprites</pre>
</div>
<p>With this property set, when you will start your application in production mode, jawr will generate the image sprite, and these image sprites will be referenced in the bundles. </p>
</div>
<div class="section"><h3>Test the image sprite generation</h3>
<p>Create an <b>/img</b> directory at the root of your web application and copy 2 <b>png</b> images in it, and rename them as <b>img1.png</b> and <b>img2.png</b>. <br />
Create an <b>/css</b> directory at the root of your web application and write a test CSS file named <b>test.css</b> and add the following content:</p>
<div class="source"><pre>/** sprite: mysprite; sprite-image: url('../img/mysprite.png'); sprite-layout: vertical */ 

.style1 {
        background-image: url(&quot;../img/img1.png&quot;); /** sprite-ref: mysprite; */
        background-repeat: no-repeat;
}

.style2 {
        background-repeat: no-repeat;
        background-image: url(&quot;../img/img2.png&quot;); /** sprite-ref: mysprite; */ 
}</pre>
</div>
<ul><li>Here is a brief explanation of the <b>smartsprites</b> directives used in that file:<p>Sprite declaration: </p>
<div class="source"><pre>        /** sprite: mysprite; sprite-image: url('../img/mysprite.png'); sprite-layout: vertical */</pre>
</div>
<p>This first line defines a new <b>sprite</b> named <b>mysprite</b>, whose the URL will be <b>/img/mysprite.png</b>. &#160; you must note that in this example the sprite URL is given relatively to the CSS sprite in which it's declared. </p>
<p>The argument <b>sprite-layout: vertical</b> defines that we use a sprite with a vertical layout. So all the image will be appended vertically. </p>
<p>Sprite reference:</p>
<div class="source"><pre>        background-image: url(&quot;../img/img1.png&quot;); /** sprite-ref: mysprite; */</pre>
</div>
<p>Here we define that the image <b>/img/img1.png</b> belongs to the sprite <b>mysprite</b>.</p>
<p>Please check the <a href="http://csssprites.org/" class="externalLink">smartsprites documentation</a> for more information about the available directives</p>
</li>
</ul>
<p>Write a test JSP page, which has a reference to a bundle containing <b>test.css</b> and add the following content: </p>
<div class="source"><pre>&lt;%@ taglib uri=&quot;http://jawr.net/tags&quot; prefix=&quot;jwr&quot; %&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
        &lt;!-- Reference to a bundle containing test.css --&gt;
        ...
&lt;/head&gt;
&lt;body&gt;
        ...
        &lt;div class=&quot;style1&quot;&gt;div content&lt;/div&gt;   
        &lt;div class=&quot;style2&quot;&gt;div content&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
<p>Deploy your application to a server and open the JSP you created. Check the content of the CSS bundle which contains <b>test.css</b>, you must find references to a new &quot;../img/mysprite.png&quot;, where you had before references to <b>img1.png</b> and <b>img2.png</b>. </p>
</div>
<div class="section"><h3>Sprites for CSS created by generators</h3>
<p>You can define sprites in a CSS created by a generator. But there is one constraint, which is that you need to define the sprite URL with a <b>sprite</b> prefix, and the URL must be absolute. Don't use relative path like 'sprite:../../mysprite.png'.</p>
<p>For generated CSS, the smartsprites directive must looks like </p>
<div class="source"><pre>/** sprite: mysprite; sprite-image: url('sprite:/img/mysprite.png'); sprite-layout: vertical */ 
...
...</pre>
</div>
</div>
<div class="section"><h3>Page design issue after image sprite generation</h3>
<p>It's possible that the design of your page may be altered after the use of sprite generation. <br />
This is an issue which can happen while using smartsprites. Please check the <a href="http://csssprites.org/#faq" class="externalLink">FAQ section</a> of smartsprites for more information.</p>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2010
    
          
  

  
  
  &nbsp;| Last Published: 01/31/2010
  &nbsp;| Version: 3.2.1
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
