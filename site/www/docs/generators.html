<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-05-08 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20140508" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Jawr - Generators</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.1.min.js"></script>

              
                  </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Java web resources bundling and compression</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-05-08
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 3.5.2
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                
      <li>
  
                          <a href="../introduction.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../features.html" title="Features">
          <i class="none"></i>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../changes.html" title="Change history">
          <i class="none"></i>
        Change history</a>
            </li>
                
      <li>
  
                          <a href="../team.html" title="The team">
          <i class="none"></i>
        The team</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../docs/servlet.html" title="The Jawr servlet">
          <i class="none"></i>
        The Jawr servlet</a>
            </li>
                
      <li>
  
                          <a href="../docs/descriptor_syntax.html" title="Descriptor syntax">
          <i class="none"></i>
        Descriptor syntax</a>
            </li>
                
      <li>
  
                          <a href="../docs/custom_bundles.html" title="Bundle definition">
          <i class="none"></i>
        Bundle definition</a>
            </li>
                
      <li>
  
                          <a href="../docs/source_ordering.html" title="Source order in bundles">
          <i class="none"></i>
        Source order in bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/cacheManager.html" title="Cache manager">
          <i class="none"></i>
        Cache manager</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_preprocessors.html" title="Global preprocessors">
          <i class="none"></i>
        Global preprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_postprocessors.html" title="Global postprocessors">
          <i class="none"></i>
        Global postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/postprocessors.html" title="Postprocessors">
          <i class="none"></i>
        Postprocessors</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Generators</a>
          </li>
                
      <li>
  
                          <a href="../docs/advanced_generators.html" title="Advanced generators">
          <i class="none"></i>
        Advanced generators</a>
            </li>
                
      <li>
  
                          <a href="../docs/license_files.html" title="Licenses in resources">
          <i class="none"></i>
        Licenses in resources</a>
            </li>
                
      <li>
  
                          <a href="../docs/taglibs.html" title="JSP Tag library">
          <i class="none"></i>
        JSP Tag library</a>
            </li>
                
      <li>
  
                          <a href="../docs/plain_html.html" title="Use in HTML pages">
          <i class="none"></i>
        Use in HTML pages</a>
            </li>
                
      <li>
  
                          <a href="../docs/modes.html" title="Debug and production modes">
          <i class="none"></i>
        Debug and production modes</a>
            </li>
                
      <li>
  
                          <a href="../docs/messages_gen.html" title="i18n message generator">
          <i class="none"></i>
        i18n message generator</a>
            </li>
                
      <li>
  
                          <a href="../docs/variant_bundle.html" title="Variant bundles">
          <i class="none"></i>
        Variant bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/illegalBundleRequestHander.html" title="Jawr strict mode - Illegal bundle request handler">
          <i class="none"></i>
        Jawr strict mode - Illegal bundle request handler</a>
            </li>
                
      <li>
  
                          <a href="../docs/jmx_support.html" title="JMX Support">
          <i class="none"></i>
        JMX Support</a>
            </li>
                
      <li>
  
                          <a href="../docs/bundle_preprocessing.html" title="Bundle preprocessing">
          <i class="none"></i>
        Bundle preprocessing</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_maven_plugin.html" title="Jawr Maven plugin">
          <i class="none"></i>
        Jawr Maven plugin</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_ant_task.html" title="Jawr Ant task">
          <i class="none"></i>
        Jawr Ant task</a>
            </li>
                
      <li>
  
                          <a href="../migrationGuide.html" title="Migration Guide">
          <i class="none"></i>
        Migration Guide</a>
            </li>
                              <li class="nav-header">Integration</li>
                              
      <li>
  
                          <a href="../integration/augmenter.html" title="Add Jawr to your framework">
          <i class="none"></i>
        Add Jawr to your framework</a>
            </li>
                
      <li>
  
                          <a href="../integration/spring.html" title="Spring MVC">
          <i class="none"></i>
        Spring MVC</a>
            </li>
                
      <li>
  
                          <a href="../integration/facelets.html" title="Facelets Tag library">
          <i class="none"></i>
        Facelets Tag library</a>
            </li>
                
      <li>
  
                          <a href="../integration/wicket.html" title="Wicket">
          <i class="none"></i>
        Wicket</a>
            </li>
                
      <li>
  
                          <a href="../integration/grails.html" title="Grails plugin">
          <i class="none"></i>
        Grails plugin</a>
            </li>
                
      <li>
  
                          <a href="../integration/dwr.html" title="DWR">
          <i class="none"></i>
        DWR</a>
            </li>
                
      <li>
  
                          <a href="../integration/validator.html" title="Commons Validator - Struts">
          <i class="none"></i>
        Commons Validator - Struts</a>
            </li>
                              <li class="nav-header">Tutorials</li>
                              
      <li>
  
                          <a href="../tutorials/quickstart.html" title="Quick start">
          <i class="none"></i>
        Quick start</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToServeImage.html" title="How to use Jawr to serve image resources">
          <i class="none"></i>
        How to use Jawr to serve image resources</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrCssSkin.html" title="How to use Jawr to generate CSS skin">
          <i class="none"></i>
        How to use Jawr to generate CSS skin</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/jawrSpriteImage.html" title="How to generate Image sprites with Jawr">
          <i class="none"></i>
        How to generate Image sprites with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToGenerateBase64Image.html" title="How to generate base64 images in CSS with Jawr">
          <i class="none"></i>
        How to generate base64 images in CSS with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseGoogleClosureCompiler.html" title="How to use Google Closure Compiler with Jawr">
          <i class="none"></i>
        How to use Google Closure Compiler with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/faq_howto.html" title="FAQ-Howto">
          <i class="none"></i>
        FAQ-Howto</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/libraries.html" title="Using popular libraries">
          <i class="none"></i>
        Using popular libraries</a>
            </li>
                              <li class="nav-header">API and sources</li>
                              
      <li>
  
                          <a href="../nonav/apidocs/index.html" title="JavaDocs">
          <i class="none"></i>
        JavaDocs</a>
            </li>
                
      <li>
  
                          <a href="../nonav/xref/index.html" title="Source XREF">
          <i class="none"></i>
        Source XREF</a>
            </li>
                              <li class="nav-header">Project tools</li>
                              
      <li>
  
                          <a href="../servlets/ProjectHome" title="Project home">
          <i class="none"></i>
        Project home</a>
            </li>
                
      <li>
  
                          <a href="../team.html" title="Membership">
          <i class="none"></i>
        Membership</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/projects/jawr/forums/discussion-forum" class="externalLink" title="Discussion forums">
          <i class="none"></i>
        Discussion forums</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/projects/jawr/lists" class="externalLink" title="Mailing lists">
          <i class="none"></i>
        Mailing lists</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/projects/jawr/downloads/directory/release" class="externalLink" title="Documents & files">
          <i class="none"></i>
        Documents & files</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/projects/jawr/sources" class="externalLink" title="Subversion">
          <i class="none"></i>
        Subversion</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/jira/browse/JAWR" class="externalLink" title="Issue tracker">
          <i class="none"></i>
        Issue tracker</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Jawr Generators<a name="Jawr_Generators"></a></h2>
<p>In some cases it is convenient to generate scripts, CSS or images dynamically. For instance, Jawr will create certain scripts to, say, copy i18n messages from a ResourceBundle over to a special script. You may need to retrieve some data from a database and create parameters that scripts will need, or simply grab parameters from a configuration file and pass them over to the scripting context. For any case where you may need to generate content you can implement a Resource Generator and register it in Jawr to suit your needs. &#160;</p>
<p>Note that a Resource Generator is <b>not</b> a <i>script servlet</i>: it will be only invoked once during application startup to build the bundles in Production mode. The result of this invocation will be added to whichever bundle you decide and reused until the next redeployment. The point is to be able to generate some script dynamically but still to be able to minify it and add it to your bundles. A perfect example is the DWR generator: all DWR script interfaces are created from java classes once during startup but they can be minified and bundled together. In debug mode, it will be called as any resource if needed.</p>
<div class="section">
<h3>Using a generator<a name="Using_a_generator"></a></h3>
<p>Generators are mapped to bundles using a GeneratorResolver. This resolver is used to determine if a resource is a generated resource or not. Prior to the 3.5 version, users were only able to use a prefix to map resources to a generator. Since the 3.5 version, users can define their own resolver. There are 2 built-in types of resolver :</p>
<ul>
<li>net.jawr.web.resource.bundle.generator.resolver.PrefixedPathResolver : For prefix path resolver</li>
<li>net.jawr.web.resource.bundle.generator.resolver.SuffixedPathResolver : For suffix path resolver</li></ul>
<p>Example of prefixed path generator :</p>
<div class="source">
<pre>        prefix:path(params)[params]
</pre></div>
<p>The prefix is a key you will specify when implementing the Generator, and the path is a string which will have different meaning depending on your generator's functionality. Also, you have params in parentheses and in brackets (both of which are optional), that further help in parameterizing the mappings. A simple mapping example, with no params, is as follows: </p>
<div class="source">
<pre>        jawr.js.bundle.one.mappings=jar:net/jawr/cpscript.js
</pre></div>
<p>In this case we are using the already existing classpath script generator, which reads a script from the classpath, as opposed to reading it from the web application dir structure. So the path in this case is the classpath where the script will be found. The prefix is 'jar', which lets Jawr know that this path must be resolved using the classpath generator. </p>
<p>This is an example in which the mapping uses two different parameters: </p>
<div>
<pre>        jawr.js.bundle.one.mappings=messages:com.myapp.messages(mynamespace)[javascript.messages]
</pre></div>
<p>Note that if you use the parameters, the order must always be parentheses first, brackets last. If you need only one parameter, you can omit the brackets param. </p></div>
<div class="section">
<h3>Jawr generators<a name="Jawr_generators"></a></h3>
<p>Jawr comes with several generators, each accomplishing a special kind of task. The currently provided generators are: </p></div>
<div class="section">
<h3>All-around generators<a name="All-around_generators"></a></h3></div></div>
<div class="section">
<h2><b>i18n messages script generator</b><a name="i18n_messages_script_generator"></a></h2>
<ul>
<li><b>Prefix</b>: message</li></ul>
<p>This generator generates javascript code with locale specific variants which are loaded depending on the user's specific language. Full documentation is <a href="./messages_gen.html">here</a>. </p></div>
<div class="section">
<h2><b>DWR scripts generator</b>: <a name="DWR_scripts_generator:"></a></h2>
<ul>
<li><b>Prefix</b>: dwr</li></ul>
<p>This generator allows you to bundle and compress together DWR generated interfaces, plus all the utility scripts required by them. Full documentation is <a href="../integration/dwr.html">here</a>. </p></div>
<div class="section">
<h2><b>Commons Validator generator</b><a name="Commons_Validator_generator"></a></h2>
<ul>
<li><b>Prefix</b>: acv</li></ul>
<p>This one will let you generate compressed and cacheable versions of the validation scripts generated in Struts by the Apache Commons Validator taglib. Full docs <a href="../integration/validator.html">here</a>. </p></div>
<div class="section">
<h2><b>classpath resource generator</b><a name="classpath_resource_generator"></a></h2>
<ul>
<li><b>Prefix</b>: jar</li></ul>
<p>It allows you to include resources present within jar files or simply located anywhere in the application classpath. You will need to use different prefixes if you are generating js or css files. To add javascript resources from the classpath you use <b>jar:</b> as the prefix, followed by the path to the resource using / as separator: </p>
<div class="source">
<pre>        
        jawr.js.bundle.foo.id=/bundles/fooBundle.js
        # Map to a script in the com.mycompany.myapp package and to another from the WAR 
        jawr.js.bundle.foo.mappings=jar:/com/mycompany/myapp/foo.js, /js/bar.js
        
</pre></div>
<p>Note the leading slash in the mapping, which is also required. You can of course combine this kind of mappings with regular ones, so you can bundle together resources from the WAR and from the classpath. </p>
<p>If you need to load CSS files from the classpath, you would use the exact same syntax <b>jar:</b>. Note that you could also use <b>jar_css:</b>, but this prefix is deprecated since Jawr 2.8. </p>
<div class="source">
<pre>        jawr.css.bundle.styles.mappings=jar:/com/mycompany/myapp/stylesheet.css, /css/bar.css   
</pre></div>
<p>CSS files loaded from the classpath may refer to images which will normally be available from the classpath as well. Since version 2.8 Jawr can serve such image files by defining an extra instance of the servlet with its init param <b>type</b> set to <b>img</b>. You can find details on how to set it up at the <a href="./servlet.html">servlet configuration page.</a></p>
<p>Unlike the normal mapping, this way of referring to resources does not yet allow wildcards (i.e.: <i>jar:/com/mycompany/myapp/**</i> would not work). </p></div>
<div class="section">
<h2><b>Less CSS generator</b><a name="Less_CSS_generator"></a></h2>
<ul>
<li><b>Suffix</b>: .less
<p>This one will handle LESS CSS resources to compile them to plain CSS resources</p>
<div class="source">
<pre>        jawr.css.bundle.styles.mappings=/css/foo.less,/css/bar.less     
</pre></div></li>
<li><b>Configuration properties</b>
<p>Jawr provides properties to configure the Less CSS generator. </p>
<table border="1" class="table table-striped">
<tr class="a">
<td align="left"><b>Property name</b></td>
<td align="left"><b>Purpose</b></td>
<td align="left"><b>Default value</b></td></tr>
<tr class="b">
<td align="left">jawr.css.less.generator.less.script.location</td>
<td align="left">The less script location</td>
<td align="left">net/jawr/web/resource/bundle/generator/css/less/less.js</td></tr>
<tr class="a">
<td align="center">jawr.css.less.generator.engine.script.location</td>
<td align="center">The less engine script location</td>
<td align="left">net/jawr/web/resource/bundle/generator/css/less/engine.js</td></tr>
<tr class="b">
<td align="center">jawr.css.less.generator.browser.script.location</td>
<td align="center">The less browser script location</td>
<td align="left">net/jawr/web/resource/bundle/generator/css/less/browser.js</td></tr></table></li></ul></div>
<div class="section">
<h2><b>CofeeScript generator</b><a name="CofeeScript_generator"></a></h2>
<ul>
<li><b>Suffix</b>: .coffee
<p>This one will handle coffeeScript resources to compile them to plain JS resources</p>
<div class="source">
<pre>        jawr.js.bundle.myScript.mappings=/js/foo.coffee,/js/bar.coffee  
</pre></div></li>
<li><b>Configuration properties</b>
<p>Jawr provides properties to configure the CoffeeScript generator. </p>
<table border="1" class="table table-striped">
<tr class="a">
<td align="left"><b>Property name</b></td>
<td align="left"><b>Purpose</b></td>
<td align="left"><b>Default value</b></td></tr>
<tr class="b">
<td align="left">jawr.js.generator.coffee.script.options</td>
<td align="left">The coffee script compiler options (Please see : http://coffeescript.org/)</td>
<td align="left">None</td></tr>
<tr class="a">
<td align="center">jawr.js.generator.coffee.script.location</td>
<td align="center">The coffee script location</td>
<td align="left">net/jawr/web/resource/bundle/generator/js/coffee/coffee-script.js</td></tr></table></li></ul></div>
<div class="section">
<h2><b>Skin generator</b><a name="Skin_generator"></a></h2>
<ul>
<li><b>Prefix</b>: skin</li></ul>
<p>This one will help you to define CSS skin in your bundles. Full docs <a href="../tutorials/howToUseJawrCssSkin.html">here</a>.</p></div>
<div class="section">
<h2><b>Skin swicther generator</b> <a name="Skin_swicther_generator"></a></h2>
<ul>
<li><b>Prefix</b>: skinSwitcher</li></ul>
<p>This one will generates the JS content for CSS skin switcher. &#160; To use it you must configure your Jawr configuration file like this :</p>
<div class="source">
<pre>jawr.js.bundle.common.id=/js/common.js
jawr.js.bundle.common.mappings=skinSwitcher:switcher.js
</pre></div>
<p>When you use the Jawr style tag for a bundle containing different CSS skin, you can force Jawr to render the links to the alternate CSS skin by using the <b>displayAlternate</b> property.</p>
<div class="source">
<pre>        &lt;jwr:style src=&quot;/css/skinnedBundle.css&quot; displayAlternate=&quot;true&quot; media=&quot;all&quot; /&gt;
</pre></div>
<p>This will force Jawr to render the links to all the skin associated to <b>/css/skinnedBundle.css</b>. This generator will generates the script to switch from a skin to another by calling the following JS function and passing as parameter the name of the style to switch to:</p>
<div class="source">
<pre>        JAWR.skin.switchToStyle(newStyle);
</pre></div>
<p>You can find an example of it's use in the basic webapplication sample. For more information about CSS skin, you can take a look to the following <a href="../tutorials/howToUseJawrCssSkin.html">documentation</a>. </p>
<div class="section">
<h3>Implementing a generator<a name="Implementing_a_generator"></a></h3>
<p>You will find below the class diagram for generators.</p><img src="../images/generator/jawr_generator.png" alt="Generator class diagram" />
<p>The root interface for resource generator is :</p>
<ul>
<li>net.jawr.web.resource.bundle.generator.ResourceGenerator. All resource generator must implement a method, which defines the mapping for this generator. 
<div class="source">
<pre>        /**
         * Returns the resource generator resolver
         * 
         * @return the resource generator resolver
         */
        public ResourceGeneratorResolver getResolver();
</pre></div>
<p>The getResolver() method returns the resolver, which will be used when mapping you generator to bundles. Jawr will recognize if a resource is handled by a Generator using the resolver, and use your generator when it applies. So, if your resolver is a PrefixResolver, which handle all resources beginning with 'foo:', you would map your generator like this: </p>
<div class="source">
<pre>        jawr.js.bundle.one.mappings=foo:somePath
</pre></div>
<p>There are 2 main types of generator:</p></li>
<li>net.jawr.web.resource.bundle.generator.TextResourceGenerator, which is the generator for the text resources (JS and CSS).</li>
<li>net.jawr.web.resource.bundle.generator.StreamResourceGenerator, which is the generator for the image resources.</li>
<li>Implementing a CSS or a JS generator
<p>A JS or a CSS generator is an implementation of the interface net.jawr.web.resource.bundle.generator.TextResourceGenerator. This is a simple interface which exposes two methods: </p>
<ul>
<li>public Reader createResource(GeneratorContext context);</li>
<li>public String getDebugModeRequestPath();</li></ul>
<p>The getDebugModeRequestPath simply returns a path to be used in debug mode. This is simply a fake script or CSS name and it really has no importance unless you are mapping the Jawr servlet to a suffix different from *.css or .js. 99% of the use cases don't need to care about this so you can simply return one of three constants: ResourceGenerator.JAVASCRIPT_DEBUGPATH, ResourceGenerator.CSS_DEBUGPATH or ResourceGenerator.IMG_DEBUGPATH: </p>
<div class="source">
<pre>public String getDebugModeRequestPath() {
        return ResourceGenerator.JAVASCRIPT_DEBUGPATH;
}
</pre></div>
<p>Finally, the createResource() method is where the actual generation takes place. This method takes a single parameter of type GeneratorContext, which contains all the information you need to build a dynamic script or CSS. The useful methods are: </p>
<ul>
<li>getPath(): this contains the mapping, without the prefix and parameters. For instance, in a mapping of the form 'prefix:thePath(param)', this method returns 'thePath'. </li>
<li>getConfig(): returns the JawrConfig object used throughout the application. It contains data about the Jawr configuration, such as wether debug mode is on or off, the current servlet mapping, and so on. </li>
<li>getCharset(): returns the current charset, which the returned script or CSS must conform to. </li>
<li>getServletContext(): returns the application's ServletContext. </li>
<li>getParenthesesParam(): returns the params in parentheses, if any were declared. For instance, in a mapping such as 'foo:path(aParam)', this would return 'aParam'. </li>
<li>getBracketsParam(): returns the params in brackets, if any were declared. For instance, in a mapping such as 'foo:path(aParam)[anotherParam], this would return 'anotherParam'.
<p>Using this information, you should be able to generate a script or CSS and return in in the form of a Reader object (typically a StringReader is sufficient for the task). </p></li></ul></li>
<li>Implementing an Image resource generator
<p>An image generator is an implementation of the interface net.jawr.web.resource.bundle.generator.StreamResourceGenerator. This is a simple interface which exposes one method: </p>
<ul>
<li>public InputStream createResourceAsStream(GeneratorContext context);</li></ul></li></ul></div>
<div class="section">
<h3>Mapping a generator<a name="Mapping_a_generator"></a></h3>
<p>Once you have your Generator implemented, you need to register into Jawr in order to use it. This is simply a matter of mapping its classname in the configuration properties file under the key 'jawr.custom.generators'. If there is more than one, you simply declare them separated by commas: </p>
<div class="source">
<pre>        jawr.custom.generators=com.mycompany.myapp.MyCustomGeneratorImplementation,com.mycompany.myapp.AnotherGenerator
</pre></div></div>
<div class="section">
<h3>A simple example: an alert message generator<a name="A_simple_example:_an_alert_message_generator"></a></h3>
<p>Here is a sample class which you can use to get started. It simply creates a script that displays an alert message with whichever text is used as the path in the mapping: </p>
<div class="source">
<pre>package net.jawr.example;

        public class TestGenerator implements TextResourceGenerator {

        private ResourceGeneratorResolver resolver;
        
        public class TestGenerator(){
                resolver = new PrefixedPathResolver(&quot;example&quot;);
        }
        
        public Reader createResource(GeneratorContext context) {
                
                return new StringReader(&quot;;alert('Mapping contained:&quot; + context.getPath() +  &quot;');&quot;);
        }

        public ResourceGeneratorResolver getResolver() {
                return resolver;
        }
        
        public String getDebugModeRequestPath() {
                return ResourceGenerator.JAVASCRIPT_DEBUGPATH;
        }
}
</pre></div>
<p>With this class in hand, we first register it in our properties config file: </p>
<div class="source">
<pre>        jawr.custom.generators=net.jawr.example.TestGenerator
</pre></div>
<p>And now it's a matter of creating a bundle and use the generator: </p>
<div class="source">
<pre>        jawr.js.bundle.global.id=/bundles/global.js
        jawr.js.bundle.global.mappings=example:Hello World!,example:And Hello Again!
</pre></div>
<p>And that's it, now add the bundle to any page and when it's loaded, you should get an alert box with the text 'Mapping contained:Hello World!' followed by a second alert box with the text 'Mapping contained:And Hello Again!'. </p></div>
<div class="section">
<h3>Security issues with generator<a name="Security_issues_with_generator"></a></h3>
<p>If you develop your own generator, which reads content from resources on your server, you must take care of prevent users to access unauthorized resources. You must check if the requested resource is an allowed one or not. For example, the user must not be able to retrieve the files located under /WEB-INF/ or /META-INF/ in your web application, or directly the content of the JSP files.</p>
<p>To check if your generator is sensible to this issue, you must launch your application in debug mode, and then try to reach your resource using the following URL: </p>
<div class="source">
<pre>        http://localhost:8080/myWebAppContext/sample.js?generationConfigParam=myGen:/WEB-INF/web.xml

</pre></div>
<p>In this example, <b>myGen</b> is the prefix of the generator. So you must replace it by the prefix of your generator. If you are able to see the content of the web.xml file, this means that you need to change your generator to fix this issue. </p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                   2014.
          All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
