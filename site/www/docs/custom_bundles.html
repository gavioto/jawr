<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-01-04 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20140104" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Jawr - Definition of custom bundles</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<div align="right" class="loginBar">
  <a href="https://java.net/people/login?original_uri=http://jawr.java.net//">Login</a>
  <a href="https://java.net/people/new">Join Now</a>
  <a class="last" href="https://java.net/projects/help/pages/Home">Help</a>
</div>
          
                  </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Java web resources bundling and compression</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-01-04
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 3.5
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                
      <li>
  
                          <a href="../introduction.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../features.html" title="Features">
          <i class="none"></i>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../changes.html" title="Change history">
          <i class="none"></i>
        Change history</a>
            </li>
                
      <li>
  
                          <a href="../team.html" title="The team">
          <i class="none"></i>
        The team</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../docs/servlet.html" title="The Jawr servlet">
          <i class="none"></i>
        The Jawr servlet</a>
            </li>
                
      <li>
  
                          <a href="../docs/descriptor_syntax.html" title="Descriptor syntax">
          <i class="none"></i>
        Descriptor syntax</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Bundle definition</a>
          </li>
                
      <li>
  
                          <a href="../docs/source_ordering.html" title="Source order in bundles">
          <i class="none"></i>
        Source order in bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/cacheManager.html" title="Cache manager">
          <i class="none"></i>
        Cache manager</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_preprocessors.html" title="Global preprocessors">
          <i class="none"></i>
        Global preprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_postprocessors.html" title="Global postprocessors">
          <i class="none"></i>
        Global postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/postprocessors.html" title="Postprocessors">
          <i class="none"></i>
        Postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/generators.html" title="Generators">
          <i class="none"></i>
        Generators</a>
            </li>
                
      <li>
  
                          <a href="../docs/advanced_generators.html" title="Advanced generators">
          <i class="none"></i>
        Advanced generators</a>
            </li>
                
      <li>
  
                          <a href="../docs/license_files.html" title="Licenses in resources">
          <i class="none"></i>
        Licenses in resources</a>
            </li>
                
      <li>
  
                          <a href="../docs/taglibs.html" title="JSP Tag library">
          <i class="none"></i>
        JSP Tag library</a>
            </li>
                
      <li>
  
                          <a href="../docs/plain_html.html" title="Use in HTML pages">
          <i class="none"></i>
        Use in HTML pages</a>
            </li>
                
      <li>
  
                          <a href="../docs/modes.html" title="Debug and production modes">
          <i class="none"></i>
        Debug and production modes</a>
            </li>
                
      <li>
  
                          <a href="../docs/messages_gen.html" title="i18n message generator">
          <i class="none"></i>
        i18n message generator</a>
            </li>
                
      <li>
  
                          <a href="../docs/variant_bundle.html" title="Variant bundles">
          <i class="none"></i>
        Variant bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/illegalBundleRequestHander.html" title="Jawr strict mode - Illegal bundle request handler">
          <i class="none"></i>
        Jawr strict mode - Illegal bundle request handler</a>
            </li>
                
      <li>
  
                          <a href="../docs/jmx_support.html" title="JMX Support">
          <i class="none"></i>
        JMX Support</a>
            </li>
                
      <li>
  
                          <a href="../docs/bundle_preprocessing.html" title="Bundle preprocessing">
          <i class="none"></i>
        Bundle preprocessing</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_maven_plugin.html" title="Jawr Maven plugin">
          <i class="none"></i>
        Jawr Maven plugin</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_ant_task.html" title="Jawr Ant task">
          <i class="none"></i>
        Jawr Ant task</a>
            </li>
                              <li class="nav-header">Integration</li>
                              
      <li>
  
                          <a href="../integration/augmenter.html" title="Add Jawr to your framework">
          <i class="none"></i>
        Add Jawr to your framework</a>
            </li>
                
      <li>
  
                          <a href="../integration/spring.html" title="Spring MVC">
          <i class="none"></i>
        Spring MVC</a>
            </li>
                
      <li>
  
                          <a href="../integration/facelets.html" title="Facelets Tag library">
          <i class="none"></i>
        Facelets Tag library</a>
            </li>
                
      <li>
  
                          <a href="../integration/wicket.html" title="Wicket">
          <i class="none"></i>
        Wicket</a>
            </li>
                
      <li>
  
                          <a href="../integration/grails.html" title="Grails plugin">
          <i class="none"></i>
        Grails plugin</a>
            </li>
                
      <li>
  
                          <a href="../integration/dwr.html" title="DWR">
          <i class="none"></i>
        DWR</a>
            </li>
                
      <li>
  
                          <a href="../integration/validator.html" title="Commons Validator - Struts">
          <i class="none"></i>
        Commons Validator - Struts</a>
            </li>
                              <li class="nav-header">Tutorials</li>
                              
      <li>
  
                          <a href="../tutorials/quickstart.html" title="Quick start">
          <i class="none"></i>
        Quick start</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToServeImage.html" title="How to use Jawr to serve image resources">
          <i class="none"></i>
        How to use Jawr to serve image resources</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrCssSkin.html" title="How to use Jawr to generate CSS skin">
          <i class="none"></i>
        How to use Jawr to generate CSS skin</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/jawrSpriteImage.html" title="How to generate Image sprites with Jawr">
          <i class="none"></i>
        How to generate Image sprites with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToGenerateBase64Image.html" title="How to generate base64 images in CSS with Jawr">
          <i class="none"></i>
        How to generate base64 images in CSS with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseGoogleClosureCompiler.html" title="How to use Google Closure Compiler with Jawr">
          <i class="none"></i>
        How to use Google Closure Compiler with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/faq_howto.html" title="FAQ-Howto">
          <i class="none"></i>
        FAQ-Howto</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/libraries.html" title="Using popular libraries">
          <i class="none"></i>
        Using popular libraries</a>
            </li>
                              <li class="nav-header">API and sources</li>
                              
      <li>
  
                          <a href="../nonav/apidocs/index.html" title="JavaDocs">
          <i class="none"></i>
        JavaDocs</a>
            </li>
                
      <li>
  
                          <a href="../nonav/xref/index.html" title="Source XREF">
          <i class="none"></i>
        Source XREF</a>
            </li>
                              <li class="nav-header">Project tools</li>
                              
      <li>
  
                          <a href="../servlets/ProjectHome" title="Project home">
          <i class="none"></i>
        Project home</a>
            </li>
                
      <li>
  
                          <a href="../team.html" title="Membership">
          <i class="none"></i>
        Membership</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/projects/jawr/forums" class="externalLink" title="Discussion forums">
          <i class="none"></i>
        Discussion forums</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/projects/jawr/lists" class="externalLink" title="Mailing lists">
          <i class="none"></i>
        Mailing lists</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/projects/jawr/downloads/directory/release" class="externalLink" title="Documents & files">
          <i class="none"></i>
        Documents & files</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/projects/jawr/sources" class="externalLink" title="Subversion">
          <i class="none"></i>
        Subversion</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/jira/browse/JAWR" class="externalLink" title="Issue tracker">
          <i class="none"></i>
        Issue tracker</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Definition of custom bundles<a name="Definition_of_custom_bundles"></a></h2>
<p>Bundles are the core functionality of Jawr. A bundle is a group of resources joined together in a single file that has an associated logical name. </p><hr />
<p><b>Common misconception</b>: Note that you are not required to add each and every resource you want compressed to a bundle. Standalone resources can also be referred by a tag library and they will be compressed/gzipped as well (see the orphan resources section below for more information). </p><hr />
<p>To create a bundle the bare minimum you will need is a name and a group of resources. For instance, the following lines in your descriptor file would create a bundle named /bundles/fooBundle.js: </p>
<div class="source">
<pre>        jawr.js.bundle.foo.id=/bundles/fooBundle.js
        jawr.js.bundle.foo.mappings=/js/foo.js, /js/bar.js
</pre></div>
<p>Note that the property <i>jawr.js.bundle.foo.id</i> is declaring two different identifiers: the identifier <i>foo</i>, which is used within other property declarations (such as <i>jawr.js.bundle.foo.mappings</i>), and a path identifier for script tags (<i>/bundles/fooBundle.js</i>). </p>
<p>The newly created bundle would be the union of foo.js and bar.js. Once created, you could then use any of three ways to import the whole bundle to your pages: </p>
<div class="source">
<pre>        Id of the bundle:
        &lt;jwr:script src=&quot;/bundles/fooBundle.js&quot;/&gt; 
        
        Path to foo.js: 
        &lt;jwr:script src=&quot;/js/foo.js&quot;/&gt; 
        
        Path to bar.js
        &lt;jwr:script src=&quot;/js/bar.js&quot;/&gt; 
</pre></div>
<p>As you can see, a bundle can be invoked by using either its id or the path to any of its members. The page link rendered will be the same in all the three sample cases:</p>
<div class="source">
<pre>&lt;script type=&quot;text/javascript&quot; src=&quot;/myWarContext/prefix/bundles/fooBundle.js&quot; &gt;&lt;/script&gt;
</pre></div>
<p>Normally, it would be a best practice to use the resource names directly, since: </p>
<ul>
<li>By using a resource name, you will later be able to change your bundles according to real life usage of your site, without the need to change your pages. </li>
<li>Using the resource name will make it explicit to other developers which parts of the code you are using. </li></ul>
<p>This holds true even if you use several members of a bundle on the same page. Jawr will only include the same bundle once per page, even when several tags match it. On the other hand, if a bundle conveys a single general functionality (such as validation), then it is probably best to invoke it by id. &#160;</p>
<p>It is recommended that you use a virtual prefix for bundle ids (such as '/bundles/'). The prefix should not correspond to any actual directory in the root resources dir, to avoid namespace collisions.</p>
<ul>
<li>Restriction on bundle ID
<p>When defining a bundle ID, you must ensure that your bundle ID has the right suffix ( &quot;.js&quot; or &quot;.css&quot; ). Jawr doesn't allow you to define bundle whose the ID starts with '/WEB-INF' and '/META-INF'. </p>
<p>So valid bundle IDs are : </p>
<div class="source">
<pre>        jawr.js.bundle.foo.id=/bundles/fooBundle.js
        ...
        jawr.css.bundle.bar.id=/bundles/barBundle.css
</pre></div></li></ul>
<div class="section">
<h3>Mapping resources<a name="Mapping_resources"></a></h3>
<p>There are three ways to map resources: </p>
<ul>
<li>Directly by resource path: simply type the relative path to the resource, starting at the root of the WAR file, as in: '/js/foo.js'. </li>
<li>By directory, non-recurring: add the path to a directory and every resource under it will be added to the bundle, as in: '/js/'. </li>
<li>By directory, recurring: same as before but adding '**' at the end. This will add every resource under the specified directory <b>and</b> any directory below it. For example: '/js/**'. </li></ul>
<p><b>Note :</b> <br />If you use a mapping like &quot;/js/lib/&quot; or &quot;/js/lib/**&quot;, by default Jawr will sort the resources in the directory by alphabetical order.</p>
<p>You can add any combination of the three types of mapping to your bundles. for instance, let's add another bundle to the previous example. We will name this bundle /bundles/bazBundle.js. It will contain every file under /js/baz/ and any of its subdirs, a script located at /js/someScript.js, and every file directly under /js/someSubdir/. </p>
<div class="source">
<pre>        jawr.js.bundle.foo.id=/bundles/fooBundle.js
        jawr.js.bundle.foo.mappings=/js/foo.js, /js/bar.js
        
        jawr.js.bundle.baz.id=/bundles/bazBundle.js
        jawr.js.bundle.baz.mappings=/js/baz/**, /js/someScript.js, /js/someSubdir/              
</pre></div>
<p>For details on how the resources are ordered within the bundle, refer to the <a href="./source_ordering.html">source ordering manual page</a>. </p>
<ul>
<li>Restriction on bundle mapping
<p>When defining the bundle mapping, Jawr allows you to define mapping containing files which have the right suffix ( &quot;.js&quot; or &quot;.css&quot; ) depending on your bundle, except for generated resource, where there is no restriction on the suffix.</p></li></ul>
<div class="section">
<h4>Special mappings<a name="Special_mappings"></a></h4>
<p>There are some alternative ways to get resources into bundles. These are meant to include resources that are not in the WAR file structure: some as resources that are available only through the classpath, and others as somehow generated content. This will be useful if your application uses a library that has its own javascript or CSS files. To add these a special syntax is used in the mapping definition, which consists in using a specific pattern (for example : a prefix followed by a colon ':'). </p>
<div class="source">
<pre>        jawr.js.bundle.foo.id=/bundles/fooBundle.js
        # Map to a script in the com.mycompany.myapp package and to another from the WAR 
        jawr.js.bundle.foo.mappings=jar:/com/mycompany/myapp/foo.js, /js/bar.js
        
</pre></div>
<p>The full documentation for the available generators and instructions on how to create your own are <a href="./generators.html">here.</a></p></div></div>
<div class="section">
<h3>Global bundles<a name="Global_bundles"></a></h3>
<p>Global bundles are useful for including common libraries and modules used throughout you site. Any bundle defined as global will always be included before any other bundle. Most of the time you will not need to explicitly invoke it since Jawr will automatically include all global bundles before any particular bundle in a page. So when you add a link to whichever bundle in your page, links will be created to all global bundles and then one more for the bundle you specified. &#160;</p>
<p>To define a global bundle you would do as follows: </p>
<div class="source">
<pre>        jawr.js.bundle.lib.id=/lib.js
        jawr.js.bundle.lib.mappings=/js/lib/**
        jawr.js.bundle.lib.global=true
        jawr.js.bundle.lib.order=1
</pre></div>
<p>We set the global parameter to true and then we specified an order number. The order value is only needed if you define more than one global bundle and you need a specific order of inclusion. </p></div>
<div class="section">
<h3>Bundle prefix<a name="Bundle_prefix"></a></h3>
<p>Every HTML link that Jawr creates has a section of its path dedicated to versioning. Jawr will serve its resources using aggressive caching headers, in order to keep clients from requesting the same bundle over and over. But, when you make changes you want to be sure that every client will download the new version. Thus, the best way to do this is to actually change the URL for the resource whenever the resource changes. &#160;</p>
<p>While in the past the prefix for a bundle had to be specified manually, now Jawr creates this prefix automatically, based upon the hash of the bundle contents. Since the generation has repeatable results, this prefix remains the same until you make a change to any member of the bundle, even across redeployments. </p></div>
<div class="section">
<h3>Postprocessors <a name="Postprocessors"></a></h3>
<p>Postprocessors are filters that Jawr applies to resources and bundles during startup. Check the <a href="./postprocessors.html">postprocessors manual page</a> for more info. &#160;</p>
<p>Each bundle you define can override the global postprocessing options. This is useful for example if you only want to minify a subset of your files. </p>
<p>To change the global postprocessor chain for a bundle, specify the <b>bundlepostprocessors</b> and/or the <b>filepostprocessors</b> attribute: </p>
<div class="source">
<pre>
        jawr.js.bundle.foo.bundlepostprocessors=license
        jawr.js.bundle.foo.fileprocessors=none
        
</pre></div>
<p>In this example, the bundle postprocessor for the <i>foo</i> bundle is set to <i>license</i>, meaning no minification will occur. And for the file-by-file postprocessor, it is specified that none will be used. </p></div>
<div class="section">
<h3>Composite bundles<a name="Composite_bundles"></a></h3>
<p>A composite bundle is made up of several bundles that may have different configuration attributes. For example, you might have a pre minified javascript library and need to bundle it along some of your own scripts. You can could then create a composite bundle in which your scripts are minified but the library is not. &#160;</p>
<p>Another use case for composites is to have part of a bundle appear in debug mode but not in production, such as loggers and the like. &#160;</p>
<p>Creating a composite is just like creating any other bundle, only instead of the mappings, you specify the child bundles that make the composite up using the <b>child.names</b> attribute. You also need to specify that the bundle is a composite by setting the <b>composite</b> attribute to true: </p>
<div class="source">
<pre>
jawr.js.bundle.comp.id=/bundles/composite.js
jawr.js.bundle.comp.global=true
jawr.js.bundle.comp.composite=true

jawr.js.bundle.comp.child.names=foo, bar
...

</pre></div>
<p>For this composite, we declared two children: <i>foo</i> and <i>bar</i>. The child bundles for a composite differ from normal bundles in that they are not declared with an id property, and they cannot be declared as global. Otherwise, every other attribute can be specified individually, such as postprocessors and the <b>debugnever</b> and <b>debugonly</b> attributes: </p>
<div class="source">
<pre>        
        jawr.js.bundle.foo.mappings=/js/foo.js, /js/bar.js
        jawr.js.bundle.foo.debugnever=true
        
        jawr.js.bundle.bar.mappings=/js/baz/**, /js/someScript.js, /js/someSubdir/              
        jawr.js.bundle.bar.bundlepostprocessors=none
        
</pre></div>
<p>With such mapping, we specify that, when in development mode, the composite will not contain the files mapped by the <i>foo</i> bundle, and that the <i>baz</i> bundle will not use any postprocessor even if there were globally defined ones. </p></div>
<div class="section">
<h3>Bundle dependencies<a name="Bundle_dependencies"></a></h3>
<p>Since the version <i>3.2</i>, Jawr allows you to define the dependencies for your bundles. This means that if your bundle defines dependencies to other bundles, when you include your bundle in a page, Jawr will add the dependencies in your page before referencing your bundle, if these dependencies are not already included. To define your dependencies, you need to use <b>dependencies</b> property in your bundle definition. <br />This property contains a list of comma separated bundle names, on which the bundle depends. You can define dependencies to a bundle or to a composite bundle.</p>
<div class="source">
<pre>        
        jawr.js.bundle.foo.id=/bundles/fooBundle.js
        jawr.js.bundle.foo.mappings=/js/foo.js, /js/bar.js
        jawr.js.bundle.foo.dependencies=baz,bar
        
        jawr.js.bundle.baz.id=/bundles/bazBundle.js
        jawr.js.bundle.baz.mappings=/js/baz/**, /js/someScript.js, /js/someSubdir/      
        
        jawr.js.bundle.bar.id=/bundles/barBundle.js
        jawr.js.bundle.bar.mappings=/js/bar/**, /js/someScript1.js, /js/someSubdir1/    
        
</pre></div>
<p>With such mapping, if you include the bundle <i>/bundles/fooBundle.js</i> in your page, if the bundles <i>/bundles/bazBundle.js</i> and <i>/bundles/barBundle.js</i> are not included, then Jawr will automatically add the reference to the missing dependencies.</p>
<div class="source">
<pre>&lt;head&gt;  
        &lt;jwr:script src=&quot;/bundles/fooBundle.js&quot;/&gt; 
&lt;/head&gt;  
</pre></div>
<p>In our example, this will generate:</p>
<div class="source">
<pre>&lt;script type=&quot;text/javascript&quot; src=&quot;/myWarContext/prefix/bundles/bazBundle.js&quot; &gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/myWarContext/prefix/bundles/barBundle.js&quot; &gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/myWarContext/prefix/bundles/fooBundle.js&quot; &gt;&lt;/script&gt;
</pre></div>
<ul>
<li>Dependency resolution and inclusion order
<p>The dependency resolution algorithm can be summed up as follows:</p>
<p>The dependencies are included before the bundle, and there are included in the same order as the one defined in the dependencies declaration. <br />And if a dependency bundle has also a dependency in that case, the bundle dependencies will be included before the dependency itself.</p>
<div class="source">
<pre>        
        jawr.js.bundle.foo.id=/bundles/fooBundle.js
        jawr.js.bundle.foo.mappings=/js/foo.js, /js/bar.js
        jawr.js.bundle.foo.dependencies=baz,bar
        
        jawr.js.bundle.baz.id=/bundles/bazBundle.js
        jawr.js.bundle.baz.mappings=/js/baz/**, /js/someScript.js, /js/someSubdir/      
        jawr.js.bundle.baz.dependencies=qux
        
        jawr.js.bundle.bar.id=/bundles/barBundle.js
        jawr.js.bundle.bar.mappings=/js/bar/**, /js/someScript1.js, /js/someSubdir1/    
        
        jawr.js.bundle.qux.id=/bundles/quxBundle.js
        jawr.js.bundle.qux.mappings=/js/qux/**, /js/someScript2.js, /js/someSubdir2/    
        
</pre></div>
<p>With the mapping above, this is how Jawr will resolve the dependencies of the bundle <b>foo</b>:</p>
<p>1. As <i>baz</i> is the first dependency, we check if this bundle has dependencies, <br />if it's the case, we will try to resolve its dependencies, and include them before <i>baz</i>. <br />2. <i>baz</i> has a dependency on <i>qux</i>. So we include <i>qux</i> and its dependencies before <i>baz</i>. <br />3. <i>qux</i> has no dependency. So we just include <i>qux</i> before <i>baz</i>. <br />4. We have finished the dependency resolution for <i>baz</i>, so we include <i>baz</i> and now we try to resolve the dependencies for <i>bar</i>. <br />5. <i>bar</i> has no dependency. So it's simply included. <br />6. <i>foo</i> has no more dependency so we add <i>foo</i></p>
<p>So the inclusion order, resulting from the dependency resolution is the following:</p>
<div class="source">
<pre>        bar1, baz, bar, foo
</pre></div></li>
<li>Global bundle
<p>It is unnecessary to reference a global bundle in your dependencies, because it will be automatically be added in any case. It is also important to note that you can't define dependencies for global bundles. This property is not allowed for this kind of bundle. To define the order of the global bundle, you can use the <i>order</i> property. Please check <a href="../descriptor_syntax.html">the descriptor syntax doc</a> for more information.</p></li>
<li>Circular dependencies
<p>The circular dependencies are not allowed. So if you define dependencies, where a bundle appears twice in the dependency chain, a <i>net.jawr.web.exception.BundleDependencyException</i> will be thrown during the bundling process. You will see below an example of circular dependency where <i>/bundles/fooBundle.js</i> appears twice in the dependency chain.</p>
<div class="source">
<pre>        
        jawr.js.bundle.foo.id=/bundles/fooBundle.js
        jawr.js.bundle.foo.mappings=/js/foo.js, /js/bar.js
        jawr.js.bundle.foo.dependencies=baz,bar
        
        jawr.js.bundle.baz.id=/bundles/bazBundle.js
        jawr.js.bundle.baz.mappings=/js/baz/**, /js/someScript.js, /js/someSubdir/      
        
        jawr.js.bundle.bar.id=/bundles/barBundle.js
        jawr.js.bundle.bar.mappings=/js/bar/**, /js/someScript1.js, /js/someSubdir1/
        awr.js.bundle.bar.dependencies=foo      
        
</pre></div></li></ul></div>
<div class="section">
<h3>Orphan resources<a name="Orphan_resources"></a></h3>
<p>In Jawr terminology, orphan resources are those not mapped to any bundle after initial configuration. The 'jawr.[js or css].bundle.basedir' property lets Jawr know where to look for orphan resources. After all bundles are created, Jawr scans this location and its subdirs to find non mapped resources (if the property is not specified, Jawr will search from the web app root dir). </p>
<p>You may choose not to define any bundle at all, so <b>all</b> resources will be orphan. Typically, you would want this if you want Jawr to act as a traditional (yet powerful) resources compressor. &#160;</p><hr />
<p><b>Warning:</b> When working with Jawr, bear in mind that <b>all</b> bundles need to be referenced using the <a href="./taglibs.html">tag library</a> or the <a href="./plain_html.html">javascript link generator for non-JSP pages</a>. Something that usually fools unaware Jawr users is the fact that using regular &lt;script&gt; or &lt;link&gt; tags with orphans will work in debug mode. However, when going into production mode, things start breaking badly because the URLs remain the same in both modes and they should actually contain extra path information for production. </p><hr />
<p>You can configure Jawr to do one of three things with orphans: </p>
<ul>
<li><b>Ignore them altogether</b>: since scanning may be time and resource consuming during start up and in some cases it is undesirable to treat orphans, you can set a parameter in config to disable all orphans related activity. Simply set <b>factory.use.orphans.mapper</b> to false (it would be true by default) and it's done. </li>
<li><b>Create one-file bundles with each orphan resource</b>: This is what Jawr will do by default. Even for files you don't need to serve within a bundle, you can let Jawr handle them as a compressor. Simply reference your scripts/CSS using the Jawr tags, with the same path you would normally use in a standard HTML script/link tag. The generated bundles will benefit from the same postprocessing scheme (minification, gzipping, etc) as any regular bundle. &#160;
<p>If the path of an orphan file accidentally matches the name of any of your bundles an exception will be thrown since bundles can not share the same path. Therefore it is recommended to reserve some namespace prefix for bundles, such as /bundles/. </p></li>
<li><b>Join all orphan files into a single bundle</b>: This is useful if you want to just put all your resources into a single file. The only thing you need to do in order to use this feature is to activate it in you configuration and to set the name for the <i>all-in-one</i> bundle: 
<div class="source">
<pre>        
        # For js resources. CSS is the same but properties start with jawr.css.*
        jawr.js.factory.use.singlebundle=true
        
        # Use any name you want
        jawr.js.factory.singlebundle.bundlename=/bundles/allInOne.js
        
</pre></div>
<p>Note that you may actually define some bundles and then use this feature if that suits you. Also, the usual ordering scheme will apply to the orphans bundle. Check the <a href="./source_ordering.html">source ordering manual</a> for more info. &#160;</p></li></ul></div>
<div class="section">
<h3>Using an absolute URL in production<a name="Using_an_absolute_URL_in_production"></a></h3>
<p>In some special cases you might want to have bundles served from a static URL when in production. To achieve this you would specify the production URL using the <b>productionURL</b>: </p>
<div class="source">
<pre>
        jawr.js.bundle.foo.productionURL=http://someserver.com/myscript.js
        
</pre></div>
<p>This would be useful when you use libraries which are publicly served by the author's CDN, such as the YUI library. You could work on your app offline using your local files, with debug mode on, and then in production your users will download from the CDN elsewhere, thus reducing your required bandwith. Needles to say, you must take good care to be sure that your local files contain the same code as the publicly served ones. </p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                   2014.
          All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
