<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">










<html>
  <head>
    <title>Jawr - Tutorial: How to use Google closure Compiler with Jawr</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      </head>
  <body class="composite">
    <!-- TODO: move this into JavaScript to patch the skin
      <div class="xright">  </div>
    -->
    <div id="leftColumn">
      <div id="navcolumn">
             <dl class=navgroup>
        <dt>About</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../servlets/ProjectHome">Home</a>
        </li>
              
    <li class="none">
              <a href="../introduction.html">Introduction</a>
        </li>
              
    <li class="none">
              <a href="../features.html">Features</a>
        </li>
              
    <li class="none">
              <a href="../changes.html">Change history</a>
        </li>
              
    <li class="none">
              <a href="../team.html">The team</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>Documentation</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../docs/servlet.html">The Jawr servlet</a>
        </li>
              
    <li class="none">
              <a href="../docs/descriptor_syntax.html">Descriptor syntax</a>
        </li>
              
    <li class="none">
              <a href="../docs/custom_bundles.html">Bundle definition</a>
        </li>
              
    <li class="none">
              <a href="../docs/source_ordering.html">Source order in bundles</a>
        </li>
              
    <li class="none">
              <a href="../docs/cacheManager.html">Cache manager</a>
        </li>
              
    <li class="none">
              <a href="../docs/global_preprocessors.html">Global preprocessors</a>
        </li>
              
    <li class="none">
              <a href="../docs/postprocessors.html">Postprocessors</a>
        </li>
              
    <li class="none">
              <a href="../docs/generators.html">Generators</a>
        </li>
              
    <li class="none">
              <a href="../docs/advanced_generators.html">Advanced generators</a>
        </li>
              
    <li class="none">
              <a href="../docs/license_files.html">Licenses in resources</a>
        </li>
              
    <li class="none">
              <a href="../docs/taglibs.html">JSP Tag library</a>
        </li>
              
    <li class="none">
              <a href="../docs/plain_html.html">Use in HTML pages</a>
        </li>
              
    <li class="none">
              <a href="../docs/modes.html">Debug and production modes</a>
        </li>
              
    <li class="none">
              <a href="../docs/messages_gen.html">i18n message generator</a>
        </li>
              
    <li class="none">
              <a href="../docs/variant_bundle.html">Variant bundles</a>
        </li>
              
    <li class="none">
              <a href="../docs/illegalBundleRequestHander.html">Jawr strict mode - Illegal bundle request handler</a>
        </li>
              
    <li class="none">
              <a href="../docs/jmx_support.html">JMX Support</a>
        </li>
              
    <li class="none">
              <a href="../docs/bundle_preprocessing.html">Bundle preprocessing</a>
        </li>
              
    <li class="none">
              <a href="../docs/jawr_maven_plugin.html">Jawr Maven plugin</a>
        </li>
              
    <li class="none">
              <a href="../docs/jawr_ant_task.html">Jawr Ant task</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>Integration</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../integration/augmenter.html">Add Jawr to your framework</a>
        </li>
              
    <li class="none">
              <a href="../integration/spring.html">Spring MVC</a>
        </li>
              
    <li class="none">
              <a href="../integration/facelets.html">Facelets Tag library</a>
        </li>
              
    <li class="none">
              <a href="../integration/wicket.html">Wicket</a>
        </li>
              
    <li class="none">
              <a href="../integration/grails.html">Grails plugin</a>
        </li>
              
    <li class="none">
              <a href="../integration/dwr.html">DWR</a>
        </li>
              
    <li class="none">
              <a href="../integration/validator.html">Commons Validator - Struts</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>Tutorials</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../tutorials/quickstart.html">Quick start</a>
        </li>
              
    <li class="none">
              <a href="../tutorials/howToUseJawrToServeImage.html">How to use Jawr to serve image resources</a>
        </li>
              
    <li class="none">
              <a href="../tutorials/howToUseJawrCssSkin.html">How to use Jawr to generate CSS skin</a>
        </li>
              
    <li class="none">
              <a href="../tutorials/jawrSpriteImage.html">How to generate Image sprites with Jawr</a>
        </li>
              
    <li class="none">
              <a href="../tutorials/howToUseJawrToGenerateBase64Image.html">How to generate base64 images in CSS with Jawr</a>
        </li>
              
    <li class="none">
              <a href="../tutorials/faq_howto.html">FAQ-Howto</a>
        </li>
              
    <li class="none">
              <a href="../tutorials/libraries.html">Using popular libraries</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>API and sources</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../nonav/apidocs/index.html">JavaDocs</a>
        </li>
              
    <li class="none">
              <a href="../nonav/xref/index.html">Source XREF</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>Project tools</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../servlets/ProjectHome">Project home</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectMemberList">Membership</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectNewsList">Announcements</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectForumView">Discussion forums</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectMailingListList">Mailing lists</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectDocumentList">Documents & files</a>
        </li>
              
    <li class="none">
              <a href="../source/browse/jawr/">Subversion</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectIssues">Issue tracker</a>
        </li>
          </ul></dd>
    </dl>
        </div>
      <script>
        // replace the java.net project tools with the navigation bar from Maven.
        // also get rid of "Get Involved" thingie too, while we are at it
        var pt = document.getElementById("projecttools");
        var nv = document.getElementById("navcolumn");
        
        while(pt.previousSibling!=null)
          pt.parentNode.removeChild(pt.previousSibling);
        
        pt.parentNode.insertBefore(nv,pt);
        pt.parentNode.removeChild(pt);
      </script>
      <script>
        // kill "description" h3 bar
        var ld = document.getElementById("longdescription");
        if(ld!=null) {
          for( n=ld.firstChild; n!=null; n=n.nextSibling ) {
            if(n.nodeType==1 && n.innerHTML=="Description" ) {
              n.parentNode.removeChild(n);
              break;
            }
          }
        }
      </script>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2>Introduction<a name="Introduction"></a></h2>
<p>The goal of this tutorial is to explain how to use with Jawr. <br />This feature is available from the version 3.5 of Jawr.</p>
<div class="section">
<h3>How it works ?<a name="How_it_works_"></a></h3>
<p>Since the version 3.5, Jawr provide by default a postprocessor to compress your JS bundles with Google Closure Compiler.<br />The google closure compiler postprocessor is a global postprocessor, which means that it will be launched at the end of the bundling process.&#160; This google closure compiler postprocessor is defined as a global postprocessor, because in advance mode, the compiler will check the JS functions to remove the dead code.</p>
<p>The default compilation level is <b>WHITESPACE_ONLY</b>.<br />Here is the list of available level :</p>
<ul>
<li>WHITESPACE_ONLY</li>
<li>SIMPLE_OPTIMIZATIONS</li>
<li>ADVANCED_OPTIMIZATIONS</li></ul>
<p>The default warning level is <b>VERBOSE</b>.</p>
<p>You can pass arguments to the closure compiler using the prefix <i>jawr.js.closure.</i></p>
<p>For instance, you can pass the boolean &quot;third_party&quot; argument using <i>jawr.js.closure.third_party</i> in the jawr properties file. The full list of arguments are define in <i>com.google.javascript.jscomp.CommandLineRunner</i>, so you can check it at the following link <a class="externalLink" href="http://closure-compiler.googlecode.com/svn/trunk/src/com/google/javascript/jscomp/CommandLineRunner.java">link</a></p>
<p>There are 2 arguments which are not allowed because they are managed by Jawr :</p>
<ul>
<li>js</li>
<li>module</li></ul>
<p>To exclude a bundle from the closure processing, you can use the following property <b>jawr.js.closure.bundles.excluded</b>, whose the value is a comma separated list of the bundles to exclude.</p>
<div class="source">
<pre>        # Use Google closure as global postprocessor
        jawr.js.bundle.factory.global.postprocessors=closure
        jawr.js.closure.compilation_level=SIMPLE_OPTIMIZATIONS
        jawr.js.closure.bundles.excluded=sample2
        
        jawr.js.bundle.sample.id=/js/sample1.js
        jawr.js.bundle.sample.mappings=/js/sample01.js,....
        
        
        jawr.js.bundle.sample2.id=/js/sample2.js
        jawr.js.bundle.sample.mappings=/js/sample02.js,...
        
</pre></div></div>
<div class="section">
<h3>Set up Jawr in your project<a name="Set_up_Jawr_in_your_project"></a></h3>
<p>Please check the <a href="./quickstart.html">quickstart</a> tutorial for the instruction about Jawr installation in your project.</p></div>
<div class="section">
<h3>Configure instances of the Jawr Servlet<a name="Configure_instances_of_the_Jawr_Servlet"></a></h3>
<p>You must configure Jawr to use at least the JS servlet.</p></div>
<div class="section">
<h3>Jawr configuration file<a name="Jawr_configuration_file"></a></h3>
<p>We will follow the following example :</p>
<div class="source">
<pre>        # Use Google closure as global postprocessor
        jawr.js.bundle.factory.global.postprocessors=closure
        jawr.js.closure.compilation_level=ADVANCED_OPTIMIZATIONS
        
        jawr.js.bundle.sample.id=/js/sample.js
        jawr.js.bundle.sample.mappings=/js/sample01.js,/js/sample02.js
        
</pre></div></div>
<div class="section">
<h3>Create a test JS file<a name="Create_a_test_JS_file"></a></h3>
<p>Write a test JS file named <b>/js/sample01.js</b> and add the following content:</p>
<div class="source">
<pre>/**
 * Hello function
 * Add two variables
 */
function hello(name){

        alert(&quot;hello &quot;+name); 
}

window['hello'] = hello;
</pre></div>
<p>Write a test JS file named <b>/js/sample02.js</b> and add the following content:</p>
<div class="source">
<pre>/**
 * Add function
 * Returns the addition of the two parameter
 */
function add(c1, c2){

        return c1 + c2; 
}
</pre></div>
<p>Write a test JSP page and add the following content: </p>
<div class="source">
<pre>&lt;%@ taglib uri=&quot;http://jawr.net/tags&quot; prefix=&quot;jawr&quot; %&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
        &lt;jawr:script src=&quot;/js/sample.js&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
        ...
        &lt;button type=&quot;button&quot; onclick=&quot;hello('world!')&quot;&gt;Click Me!&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;

</pre></div>
<p>Deploy your application to a server and open the JSP you created. You will notice that the <b>add</b> function has been removed from the generated bundle as it is considered as not used. </p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2014
    
          
  

  
  
  &nbsp;| Last Published: 2014-01-01
  &nbsp;| Version: 3.5
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
